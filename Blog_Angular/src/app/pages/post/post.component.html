<app-header [pageTitle]="Category"></app-header>

<div class="container" style="margin-top: 70px;">

  <div class="row">

    <div class="col-sm-8 offset-sm-2">

      <div *ngIf="alertMessage" class="alert alert-{{alertClass}}" role="alert">
        {{alertMessage}}
      </div>

      <div>
        <form [formGroup]="postForm">

          <div class="form-group">

            <label for="title">Title</label>

            <input id="title" class="form-control"
                   formControlName="title" required #focusInput>

            <div *ngIf="postForm.get('title').invalid && (postForm.get('title').dirty || postForm.get('title').touched)"
                 class="alert alert-danger">

              <div *ngIf="postForm.get('title').errors.required">
                Title is required.
              </div>
            </div>

          </div>

          <div class="form-group">

            <label for="title">Category</label>

            <select class="form-control" formControlName="categoryId">
              <option [ngValue]="null">Select category</option>
              <option *ngFor="let category of categories; let i=index" [value]="category.id">{{category.name}}</option>
            </select>


            <div *ngIf="postForm.get('categoryId').invalid && (postForm.get('categoryId').dirty || postForm.get('categoryId').touched)"
                 class="alert alert-danger">

              <div *ngIf="postForm.get('categoryId').errors.required">
                Category is required.
              </div>
            </div>

          </div>

          <div class="form-group">

            <label for="title">Publication Date</label>

            <input id="title" class="form-control"
                   formControlName="publicationDate" required placeholder="dd/MM/yyyy">

            <div *ngIf="postForm.get('publicationDate').invalid && (postForm.get('publicationDate').dirty || postForm.get('publicationDate').touched)"
                 class="alert alert-danger">

              <div *ngIf="postForm.get('publicationDate').errors.required">
                Publication Date is required.
              </div>
              <div *ngIf="postForm.get('publicationDate').errors.invalidDate">
                Incorrect date format selected
              </div>
            </div>

          </div>

          <div class="form-group">

            <label for="title">Content</label>

            <textarea id="content" class="form-control"
                      formControlName="content" required></textarea>

            <div *ngIf="postForm.get('content').invalid && (postForm.get('content').dirty || postForm.get('content').touched)"
                 class="alert alert-danger">

              <div *ngIf="postForm.get('content').errors.required">
                Content is required.
              </div>

              <div *ngIf="postForm.get('content').errors.minlength">
                Content length must be minimun of 10 characters long.
              </div>

            </div>

          </div>

          <button class="btn btn-primary" [disabled]="!postForm.valid"  (click)="save()">Save</button>
        </form>

      </div>
    </div>
  </div>
</div>
